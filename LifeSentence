--// Exploit Check \\--
if #{firetouchinterest, fireproximityprompt} ~= 2 then
    while true do
    end
end

--// Exploit Fix \\--
if not pcall(function() return syn.protect_gui end) then
    syn = {}
    syn.protect_gui = function(A_1)
        A_1.Parent = game:GetService("CoreGui")
    end
end

--// Services \\--
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

--// Variables \\--
local Player = Players.LocalPlayer
local Rocks = Workspace:WaitForChild("MiningRocks")
local Robbable = Workspace:WaitForChild("Robbable")
local TP_Part = Workspace:WaitForChild("SecurityStuffIDK"):WaitForChild("TeleBackPart")
local LootSpawns = Workspace:WaitForChild("LootSpawns")
local PlayerStats = ReplicatedStorage:WaitForChild("PlayerStats")
local Local_PlayerStats = PlayerStats:WaitForChild(Player.Name)

--// Libraries \\--
local ESP = loadstring(game:HttpGet("https://kiriot22.com/releases/ESP.lua"))()
ESP:Toggle(true)
ESP.Players = false
ESP.AutoRemove = false
ESP.Rob = false
local Library = loadstring(game:HttpGetAsync('https://raw.githubusercontent.com/Just-Egg-Salad/roblox-scripts/main/uwuware'))()
local Window = Library:CreateWindow("Helper by Ezpi#0474")

--// ESP Color \\--
ESP.Overrides.GetColor = function(A_1)
    local A_2 = ESP:GetPlrFromChar(A_1)
    if A_2 then
        local A_3 = PlayerStats:FindFirstChild(A_2.Name)
        local A_4 = A_2:FindFirstChild("Bounty", true)
        if A_3 and A_3:FindFirstChild("Cop") and A_3.Cop.Value == true then
            return Color3.new(0.2, 0.2, 1)
        elseif A_4 and A_4.Value > 0 then
            return Color3.new(1, 0.2, 0.2)
        end
    end
    return Color3.new(1, 1, 1)
end

--// Get Target \\--
function GetTarget()
    -- Variables
    local Distance = Library.flags.Range
    local Closest = false
    local Cop = Local_PlayerStats.Cop.Value
    -- Go Through Players
    for _, A_1 in next, Players:GetPlayers() do
        local Char = A_1.Character
        -- Player Check
        if Char and A_1 ~= Player and Char:FindFirstChild("Head") and Char:FindFirstChild("Humanoid") and Char.Humanoid.Health > 0 and not Char:FindFirstChild("ForceField") then
            -- Team Check
            local Data = PlayerStats:FindFirstChild(A_1.Name)
            if Data and Data:FindFirstChild("Cop") and (Cop == false or Data.Cop.Value == false) then
                -- Distance Check
                local New_Distance = Player:DistanceFromCharacter(Char.Head.Position)
                if New_Distance < Distance then
                    Distance = New_Distance
                    Closest = Char.Head
                end
            end
        end
    end
    return Closest
end

--// UI Library \\--
Window:AddToggle({
    text = "Attack-Aura",
    flag = "Attack",
    callback = function()
        while Library.flags.Attack == true and wait() do
            local Target = GetTarget()
            local Char = Player.Character
            if Target and Char then
                for _, Tool in next, Char:GetChildren() do
                    if Tool:IsA("Tool") and Tool:FindFirstChild("Damage") and Tool.Damage.Value > 0 then
                        Tool:Activate()
                        pcall(function()
                            firetouchinterest(Tool.Handle, Target, 0)
                            firetouchinterest(Tool.Handle, Target, 1)
                        end)
                    end
                end
            end
        end
    end
})
Window:AddToggle({
    text = "Auto-Arrest",
    flag = "Arrest",
    callback = function()
        while Library.flags.Arrest == true and wait() do
            if Player.Character and Player.Character:FindFirstChild("Handcuffs") then
                for _, A_1 in next, Players:GetPlayers() do
                    local Char = A_1.Character
                    if Char and A_1 ~= Player and A_1:FindFirstChild("leaderstats") and A_1.leaderstats:FindFirstChild("Bounty") and A_1.leaderstats.Bounty.Value > 0 then
                        local Prox = Char:FindFirstChild("ArrestPrompt", true)
                        if Prox and Player:DistanceFromCharacter(Prox.Parent.Position) < Prox.MaxActivationDistance then
                            fireproximityprompt(Prox)
                        end
                    end
                end
            end
        end
    end
})
Window:AddToggle({
    text = "Collect Dropped Cash",
    flag = "Cash",
    callback = function()
        while Library.flags.Cash == true and wait() do
            for _, A_1 in next, Workspace:GetChildren() do
                local Prompt = A_1:FindFirstChildOfClass("ProximityPrompt")
                if Prompt and A_1.Name == "DroppedCash" and Player:DistanceFromCharacter(A_1.Position) < Prompt.MaxActivationDistance then
                    fireproximityprompt(Prompt)
                end
            end
        end
    end
})
Window:AddBind({
    text = "Equip All Weapons",
    key = "R",
    callback = function()
        for _, A_1 in next, Player.Backpack:GetChildren() do
            if A_1:IsA("Tool") and A_1:FindFirstChild("Damage") and A_1.Damage.Value > 0 then
                A_1.Parent = Player.Character
            end
        end
    end
})
Window:AddSlider({
    text = "Attack-Range",
    flag = "Range",
    min = 2,
    max = 18,
    float = 0.1
})
local ESP_Folder = Window:AddFolder("ESP Settings")
ESP_Folder:AddToggle({
    text = "Players",
    callback = function(A_1)
        ESP.Players = A_1
    end
})
ESP_Folder:AddToggle({
    text = "Robbable",
    flag = "Rob"
})
ESP_Folder:AddToggle({
    text = "Items/Scrap",
    flag = "Scrap"
})
local Misc = Window:AddFolder("Misc")
Misc:AddToggle({
    text = "Auto-Mine",
    flag = "Mine",
    callback = function()
        while Library.flags.Mine == true and wait() do
            local Rock = Rocks:FindFirstChildOfClass("UnionOperation")
            local Tool = Player.Character and Player.Character:FindFirstChild("Pickaxe")
            if Rock and Tool then
                Tool:Activate()
                firetouchinterest(Tool.Handle, Rock, 0)
                firetouchinterest(Tool.Handle, Rock, 1)
                wait(0.35)
            end            
        end
    end
})
Misc:AddToggle({
    text = "Auto-Dumbell",
    flag = "Dumbell",
    callback = function()
        while Library.flags.Dumbell do
            local Tool = Player.Character and Player.Character:FindFirstChild("Dumbell")
            if Tool then
                Tool:Activate()
                Tool:Deactivate()
            end
            wait()
        end
    end
})
Misc:AddBind({
    text = "Teleport Forwards",
    callback = function()
        Player.Character.HumanoidRootPart.CFrame *= CFrame.new(0, 0, -5)
    end
})
local Teleports = Window:AddFolder("Teleports")
for _, A_1 in next, Workspace:WaitForChild("Buttons"):GetChildren() do
    local Name = A_1:FindFirstChild("ToolName")
    local Button = A_1:FindFirstChild("Button")
    if Name and Button then
        Teleports:AddButton({
            text = Name.Value,
            callback = function()
                -- Check
                local Primary = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") or false
                if Primary == false then
                    return
                end
                -- Bypass
                local Pass = Player:WaitForChild("Backpack"):WaitForChild("Stats"):WaitForChild("TeleportPass")
                while Pass.Value == false do
                    firetouchinterest(Primary, TP_Part, 0)
                    firetouchinterest(Primary, TP_Part, 1)
                    task.wait(0.1)
                end
                -- Teleport
                task.wait(0.25)
                Primary.CFrame = CFrame.new(Button.Position) + Vector3.new(0, 3, 0)
            end
        })
    end
end
Library:Init()

--// Rob ESP \\--
for _, A_1 in next, Robbable:GetChildren() do
    local Prompt = A_1:FindFirstChildWhichIsA("ProximityPrompt", true)
    ESP:Add(A_1, {
        Name = A_1.Name,
        PrimaryPart = A_1.PrimaryPart or A_1:FindFirstChild("HumanoidRootPart"),
        IsEnabled = function()
            return Prompt.Enabled == true and Library.flags.Rob == true
        end,
        Color = Color3.fromRGB(66, 233, 255)
    })
end

--// Item ESP \\--
local Scrap = {"Gear", "Blade", "Spring"}
for _, A_1 in next, LootSpawns:GetChildren() do
    local Prompt = A_1:WaitForChild("Part"):WaitForChild("Attachment"):WaitForChild("ProximityPrompt")
    ESP:Add(A_1, {
        Name = "Item/Scrap",
        PrimaryPart = A_1.PrimaryPart or A_1:FindFirstChild("Part"),
        IsEnabled = function(A_2)
            if Prompt.Enabled == true and Library.flags.Scrap == true then
                -- Get Item Name
                local New_Name = "Item/Scrap"
                for _, A_3 in next, Scrap do
                    if A_1[A_3].Transparency == 0 then
                        New_Name = A_3
                    end
                end
                ESP:GetBox(A_1).Name = New_Name
                return true
            end
            return false
        end,
        Color = Color3.new(0.3, 1, 0.3)
    })
end
